<nav class="w-full" id="toc-nav">
    <ul class="space-y-2">
        <li>
            <a href="#about" data-section="about" class="toc-link block py-2 text-gray-400 hover:text-white transition-colors">
                Sobre m√≠
            </a>
        </li>
        
        <li>
            <a href="#experience" data-section="experience" class="toc-link block py-2 text-gray-400 hover:text-white transition-colors">
                Experiencia
            </a>
        </li>
        
        <li>
            <a href="#projects" data-section="projects" class="toc-link block py-2 text-gray-400 hover:text-white transition-colors">
                Proyectos
            </a>
        </li>
    </ul>
</nav>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const sections = document.querySelectorAll('[id]');
    const tocLinks = document.querySelectorAll('.toc-link');
    
    const observerOptions = {
        root: null,
        rootMargin: '-20% 0px -70% 0px',
        threshold: 0
    };
    
    function updateActiveLink(activeId: string) {
        tocLinks.forEach(link => {
            const section = link.getAttribute('data-section');
            if (section === activeId) {
                link.classList.remove('text-gray-400');
                link.classList.add('text-white');
            } else {
                link.classList.remove('text-white');
                link.classList.add('text-gray-400');
            }
        });
    }
    
    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                updateActiveLink(entry.target.id);
            }
        });
    }, observerOptions);
    
    sections.forEach(section => {
        if (['about', 'experience', 'projects'].includes(section.id)) {
            observer.observe(section);
        }
    });
    
    updateActiveLink('about');
});
</script>